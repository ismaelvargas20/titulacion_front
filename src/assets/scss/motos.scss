/* Estilos para la página motos: banner y tarjetas más vivas */

$primary: #0b73ff;
$accent: #00b4ff;
$muted: #707582;
$card-radius: 12px;
$shadow: 0 6px 18px rgba(12, 35, 63, 0.12);

.motos-main {
  padding: 18px 24px 48px;
  max-width: 1200px;
  margin: 0 auto;
}

/* Hero para invitar a vender */
.sell-hero {
  background: linear-gradient(90deg, $primary, $accent);
  color: #fff;
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 22px;
  box-shadow: 0 8px 30px rgba(11, 115, 255, 0.12);

  .sell-hero-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 20px;
  }

  h1 {
    margin: 0 0 6px 0;
    font-size: 1.5rem;
    font-weight: 700;
    letter-spacing: -0.2px;
  }

  p {
    margin: 0;
    color: rgba(255,255,255,0.92);
  }

  .btn {
    display: inline-block;
    text-decoration: none;
    border-radius: 12px;
    font-weight: 800;
    padding: 14px 24px; /* más grande para que no quede recortado */
    transition: transform 160ms ease, box-shadow 160ms ease;
  }

  .btn-primary {
    background: #fff;
    color: $primary;
    box-shadow: 0 6px 18px rgba(11,115,255,0.12);
    border: none;
    font-size: 0.92rem; /* un poco menor: "Vender ahora" más balanceado */
  }

  .btn-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 30px rgba(11,115,255,0.14);
  }
}

/* Sección de elementos destacados */
.featured-items {
  .section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px;

    h2 {
      font-size: 1.25rem;
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 0;
    }

    .view-all-link {
      color: $primary;
      font-weight: 600;
      text-decoration: none;
    }
  }

  .carousel-wrapper {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .carousel-button {
    background: var(--card-bg, #fff); /* usar token para adaptarse a tema */
    border: 1px solid var(--muted-border, rgba(0,0,0,0.06));
    color: $primary;
    width: 48px; /* más grande */
    height: 48px;
    font-size: 1.1rem;
    padding: 0;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%; /* circular */
    box-shadow: 0 8px 18px rgba(2,6,23,0.06);
  }

  .carousel-button:hover { background: rgba(11,115,255,0.05); }

  /* icono dentro del botón un poco más grande */
  .carousel-button svg { width: 18px; height: 18px; }

  /* Grid de tarjetas: 6 columnas en desktop, se adapta en responsive */
  .item-cards-grid {
    display: grid;
    gap: 18px;
    padding: 6px 8px;
    grid-template-columns: repeat(6, 1fr);
  }

  /* Tarjeta individual */
  .item-card {
    background: var(--card-bg, #fff);
    width: 100%;
    border-radius: $card-radius;
    box-shadow: var(--shadow-sm, $shadow);
    overflow: hidden;
    transition: transform 220ms cubic-bezier(.2,.9,.2,1), box-shadow 220ms;
    cursor: pointer;
    display: flex;
    flex-direction: column;
  }

  .item-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 40px rgba(12,35,63,0.14);
  }

  /* Resaltar temporalmente la tarjeta cuando se navega desde otra parte (p.ej. Chat) */
  .item-card.highlight {
    transform: translateY(-10px);
    box-shadow: 0 30px 80px rgba(11,115,255,0.16), 0 0 0 8px rgba(11,115,255,0.06);
    transition: box-shadow 320ms ease, transform 220ms cubic-bezier(.2,.9,.2,1);
  }

  .card-image {
    position: relative;
    height: 150px;
    overflow: hidden;

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transition: transform 350ms ease;
    }

    .item-card:hover & img {
      transform: scale(1.06);
    }

    /* precio como badge */
    .card-price {
      position: absolute;
      left: 12px; /* mantener distancia cómoda del borde */
      top: 12px;
      background: var(--price-badge-bg, linear-gradient(90deg,#0b73ff,#00b4ff));
      color: var(--badge-text, #fff);
      height: 20px;               /* altura fija pequeña */
      padding: 0 8px;            /* solo padding horizontal */
      border-radius: 6px;        /* más pequeño y sutil */
      font-weight: 700;
      font-size: 0.72rem;        /* legible pero compacto */
      line-height: 20px;         /* centrar el texto verticalmente */
      display: inline-flex;
      align-items: center;
      gap: 6px;
      min-width: 48px;           /* evitar que colapse demasiado */
      box-shadow: 0 2px 6px rgba(11,115,255,0.08);
      overflow: hidden;

      /* icono del badge (FaTag) contenido y alineado */
      svg { width: 12px; height: 12px; display: block; }
    }

    /* overlay sutil en la parte inferior de la imagen */
    &::after {
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 40%;
      background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.18) 100%);
    }
  }

  .card-content {
    padding: 12px 14px 16px;
    display: flex;
    flex-direction: column;
    gap: 8px;

    color: var(--text); /* asegurar que el contenido respete el tema */

    .card-title {
      margin: 0;
      font-size: 1rem;
      font-weight: 700;
      color: var(--text);
    }

    .card-meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      color: var(--muted);
      font-size: 0.9rem;

      .star-icon { color: #f5c518; }
    }
  }
}

/* Quitar scrollbar feo en navegadores */
.item-cards-carousel::-webkit-scrollbar { height: 8px; }
.item-cards-carousel::-webkit-scrollbar-thumb { background: rgba(11,115,255,0.12); border-radius: 99px; }

/* Responsive */
@media (max-width: 780px) {
  .sell-hero-inner { flex-direction: column; align-items: flex-start; }
  .item-cards-grid { grid-template-columns: repeat(3, 1fr); }
  .card-image { height: 140px; }
}

@media (max-width: 420px) {
  .motos-main { padding: 12px; }
  .item-cards-grid { grid-template-columns: repeat(2, 1fr); }
  .card-image { height: 120px; }
}

/* Formulario de venta embebido */
.sell-form {
  margin: 12px 0 20px;
  padding: 14px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(2,6,23,0.06);
  border: 1px solid rgba(255,255,255,0.04);
}

.sell-form-grid {
  display: grid;
  grid-template-columns: 2fr 1fr; /* formulario principal + preview */
  gap: 18px;
  align-items: start;
}

.sell-form-grid label { display: flex; flex-direction: column; font-size: 0.95rem; color: var(--text); }
.sell-form-grid input, .sell-form-grid select, .sell-form-grid textarea { margin-top: 8px; padding: 10px 12px; border-radius: 10px; border: 1px solid var(--muted-border); background: transparent; color: var(--text); box-shadow: inset 0 1px 0 rgba(255,255,255,0.02); }
.sell-form-grid label.full { grid-column: 1 / -1; }
.sell-form-main { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
.sell-form-main label { margin: 0; }
.sell-form-main label.full { grid-column: 1 / -1; }
.sell-form-actions { display: flex; align-items: center; gap: 12px; grid-column: 1 / -1; justify-content: flex-end; }

.sell-form-preview { grid-column: 2 / 3; }
.preview-card { background: var(--card-bg, #fff); border-radius: 12px; padding: 12px; box-shadow: 0 8px 30px rgba(2,6,23,0.06); box-sizing: border-box; overflow: hidden; }
.preview-image { position: relative; border-radius: 10px; overflow: hidden; height: 160px; background: linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.04)); }
.preview-image img { width: 100%; max-width: 100%; height: 100%; object-fit: cover; display: block; }
.preview-price { position: absolute; left: 12px; top: 12px; background: var(--price-badge-bg, #0b73ff); color: #fff; padding: 6px 10px; border-radius: 8px; font-weight:800; font-size:0.85rem; box-shadow: 0 8px 20px rgba(11,115,255,0.12); }
.preview-body { padding: 10px 6px; }
.preview-body h4 { margin: 0 0 6px 0; font-size: 1rem; }
.preview-desc { color: var(--muted); font-size: 0.92rem; margin: 8px 0; }
.preview-contact { font-size: 0.88rem; color: var(--muted); }

/* File input styling inside sell form */
.sell-form-main input[type="file"] { margin-top: 8px; padding: 8px 6px; border-radius: 8px; background: transparent; color: var(--text); }
.sell-form-main input[type="file"]::-webkit-file-upload-button { background: var(--cta-light, #0b73ff); color: #fff; border: none; padding: 6px 10px; border-radius: 6px; }

/* Modal contact phone styling */
.modal-contact-phone { margin-left: 12px; color: var(--muted); font-weight:700; }

.sell-form-success { margin-top: 12px; padding: 10px 12px; background: linear-gradient(90deg, rgba(11,115,255,0.08), rgba(79,184,255,0.06)); color: #033a66; border-left: 4px solid var(--cta-light, #0b73ff); border-radius: 8px; font-weight: 700; }

.btn.loading { opacity: 0.9; }

.sell-form-preview .preview-empty { font-size: 0.85rem; color: var(--muted); padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.03); }

@media (max-width: 780px) {
  .sell-form-grid { grid-template-columns: 1fr; }
  .sell-form-main { grid-template-columns: 1fr; }
  .sell-form-preview { grid-column: 1 / -1; }
}
@media (max-width: 420px) { .sell-form-grid { grid-template-columns: 1fr; } }

/* Panel y animación */
.sell-form-panel { overflow: hidden; max-height: 0; transition: max-height 320ms ease; }
.sell-form-panel.open { max-height: 800px; }
.fade-slide { animation: fadeSlide 320ms ease both; }
@keyframes fadeSlide { from { opacity: 0; transform: translateY(-6px); } to { opacity: 1; transform: translateY(0); } }

/* Modal / popup para el formulario de venta */
.sell-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(8, 14, 30, 0.48);
  display: flex;
  align-items: center;
  justify-content: center;
  /* Reservar más espacio a la derecha para que la scrollbar del overlay
    aparezca cerca del borde de la ventana y no junto al modal. */
  /* reducir padding derecho para que la scrollbar del overlay quede más
    cercana al modal y no muy separada (antes 120px). */
  padding: 24px 24px 24px 24px;
  z-index: 1200;
  /* No dejar que el overlay muestre la barra — la gestionará el modal.
    Quitamos aquí el scroll para que la barra pueda posicionarse en el
    borde del modal (lado derecho de la preview). */
  overflow-y: hidden;
}

.sell-modal {
  width: 100%;
  /* garantizar que el modal se ajuste con zoom y no cause overflow horizontal
     usamos min() para respetar el max-width y al mismo tiempo mantener
     un margen respecto a los bordes de la ventana cuando el zoom reduce
     el viewport efectivo */
  /* ampliar ligeramente el modal para dar más espacio al formulario */
  max-width: 1100px;
  width: min(1100px, calc(100% - 48px));
  box-sizing: border-box; /* asegurar que padding no aumente el ancho calculado */
  background: var(--card-bg, #fff);
  border-radius: 14px;
  box-shadow: 0 30px 60px rgba(2,6,23,0.36);
  /* dejar más espacio a la derecha para que la scrollbar no toque el contenido
     y evitar que los menús desplegables queden pegados al borde. Reservamos
     espacio extra para que la scrollbar quede en el extremo derecho. */
  /* Reservar más espacio a la derecha del modal para que la scrollbar quede
    claramente fuera de la preview (a la derecha del card). */
  /* ajustar padding derecho para que la scrollbar del modal quede pegada
    al borde derecho del modal (junto a la preview). */
  padding: 18px 18px 18px 18px;
  position: relative;
  /* Hacer que el modal sea el contenedor scrollable: la barra aparecerá
    en el borde derecho del modal (junto a la preview). */
  overflow-y: auto;
  overflow-x: hidden;
  /* No forzamos margin-right; el padding del overlay ya reserva el
    espacio donde aparecerá la barra. Mantener margin-right en 0 para
    centro correcto del modal. */
  margin-right: 0;
  max-height: calc(100vh - 80px);
}

.sell-modal .modal-close {
  position: absolute;
  /* mover ligeramente a la izquierda para no quedar pegado al thumb */
  right: 18px;
  top: 8px;
  background: transparent;
  border: none;
  font-size: 24px;
  line-height: 1;
  cursor: pointer;
  color: var(--muted, #707582);
}

/* Añadir padding interno a la estructura del formulario para reservar espacio
   entre el contenido y la scrollbar que ahora está en el borde derecho del modal */
.sell-modal .sell-form {
  box-sizing: border-box;
  /* dejar padding adicional a la derecha para que la scrollbar no quede
     pegada a los campos del formulario ni a la preview; esto separa la
     barra visualmente sin cambiar la anchura total del modal. */
  padding-right: 20px;
}


/* Scrollbar mejorado — aplicable a modal/overlay. Diseño moderno y adaptado a modo oscuro */
/* Reglas para Firefox/IE */
.sell-modal, .sell-modal-overlay {
  scrollbar-width: thin;
  scrollbar-color: rgba(2,6,23,0.18) transparent; /* thumb track */
  -ms-overflow-style: auto;
}

/* WebKit: ancho y track */
.sell-modal::-webkit-scrollbar, .sell-modal-overlay::-webkit-scrollbar { width: 12px; }
.sell-modal::-webkit-scrollbar-track, .sell-modal-overlay::-webkit-scrollbar-track { background: transparent; }

/* Thumb: suave, con gradiente, borde para crear separación y sombra sutil */
.sell-modal::-webkit-scrollbar-thumb, .sell-modal-overlay::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, rgba(2,6,23,0.12), rgba(2,6,23,0.20));
  border-radius: 10px;
  border: 3px solid transparent; /* padding visual entre thumb y track */
  background-clip: padding-box;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
  min-height: 36px;
}
.sell-modal::-webkit-scrollbar-thumb:hover, .sell-modal-overlay::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, rgba(2,6,23,0.22), rgba(2,6,23,0.30));
}
.sell-modal::-webkit-scrollbar-thumb:active, .sell-modal-overlay::-webkit-scrollbar-thumb:active { transform: scaleX(0.98); }

/* Dark theme overrides: aumentar contraste del thumb */
.app-main.dark-theme .sell-modal, .app-main.dark-theme .sell-modal-overlay { scrollbar-color: rgba(255,255,255,0.12) transparent; }
.app-main.dark-theme .sell-modal::-webkit-scrollbar-thumb, .app-main.dark-theme .sell-modal-overlay::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.12));
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.08);
}
.app-main.dark-theme .sell-modal::-webkit-scrollbar-thumb:hover, .app-main.dark-theme .sell-modal-overlay::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.18));
}

/* Ocultar scrollbar del overlay para evitar barras en ambos contenedores */
.sell-modal-overlay { scrollbar-width: none; -ms-overflow-style: none; }
.sell-modal-overlay::-webkit-scrollbar { display: none; }

/* Ajustes para que el layout del modal use las mismas clases .sell-form-grid etc */
.sell-modal .sell-form-grid { 
  gap: 20px;
  /* Aumentar la proporción de la columna del formulario (lado izquierdo)
     para dar más espacio a los inputs y dropdowns y evitar solapamientos
     por la previsualización. Se reduce ligeramente el ancho mínimo de la
     preview para dejar más espacio al formulario. */
  grid-template-columns: 3fr minmax(180px, 360px);
}
.sell-modal .sell-form-grid input,
.sell-modal .sell-form-grid select,
.sell-modal .sell-form-grid textarea {
  /* evitar que controles forcen el ancho del grid y asegurar que ocupen
     el 100% del contenedor principal (prevenir overflow horizontal) */
  min-width: 0;
  width: 100%;
  box-sizing: border-box;
}

.sell-modal .sell-form-preview {
  /* limitar ancho de la vista previa para dar prioridad visual al formulario */
  max-width: 360px;
}
.sell-modal .sell-form-main { grid-template-columns: repeat(2, 1fr); }
.sell-modal .sell-form-main label { margin-bottom: 8px; }
.sell-modal .sell-form-actions { justify-content: flex-start; }

/* Mejoras visuales SOLO para tema claro: más vida en el modal */
.app-main:not(.dark-theme) .sell-modal {
  background: linear-gradient(180deg, #ffffff, #fbfdff);
  border: 1px solid rgba(11,115,255,0.08);
  box-shadow: 0 40px 80px rgba(11,115,255,0.10);
}

.app-main:not(.dark-theme) .sell-modal .sell-form-main input,
.app-main:not(.dark-theme) .sell-modal .sell-form-main select,
.app-main:not(.dark-theme) .sell-modal textarea {
  background: #ffffff;
  border: 1px solid rgba(11,115,255,0.06);
  box-shadow: inset 0 1px 0 rgba(11,115,255,0.02);
}

.app-main:not(.dark-theme) .sell-modal .sell-form-main input:focus,
.app-main:not(.dark-theme) .sell-modal .sell-form-main select:focus,
.app-main:not(.dark-theme) .sell-modal textarea:focus {
  outline: none;
  border-color: #0b73ff;
  box-shadow: 0 8px 30px rgba(11,115,255,0.10);
}

.app-main:not(.dark-theme) .sell-modal .preview-card {
  box-shadow: 0 18px 40px rgba(11,115,255,0.06);
  border-radius: 12px;
}

.app-main:not(.dark-theme) .sell-modal .preview-price {
  background: linear-gradient(90deg,#0b73ff,#00b4ff);
  box-shadow: 0 10px 26px rgba(11,115,255,0.10);
}

.app-main:not(.dark-theme) .sell-modal .sell-form .btn.btn-primary {
  background: linear-gradient(90deg,#0b73ff,#00b4ff);
  color: #fff;
  box-shadow: 0 12px 30px rgba(11,115,255,0.12);
}

.app-main:not(.dark-theme) .sell-modal label { color: #153a66; }



/* Hero button refinement */
.hero-sell-btn { padding: 12px 20px; border-radius: 12px; font-weight: 800; box-shadow: 0 8px 22px rgba(11,115,255,0.12); background: #fff; color: $primary; border: none; }
.hero-sell-btn:hover { transform: translateY(-2px); box-shadow: 0 12px 28px rgba(11,115,255,0.14); }
.hero-sell-btn:focus { outline: none; box-shadow: 0 12px 28px rgba(11,115,255,0.14); }

/* Estilos para botones dentro del formulario embebido */
.sell-form .btn { appearance: none; border: none; padding: 12px 16px; border-radius: 10px; font-weight: 700; cursor: pointer; }
.sell-form .btn.btn-primary {
  /* usar color sólido parecido a la 1ra imagen */
  background: var(--cta-light, #0b73ff);
  color: #fff;
  box-shadow: 0 10px 26px rgba(11,115,255,0.12);
  border: none;
  font-size: 0.95rem;
  padding: 12px 20px;
  transition: transform 160ms ease, filter 120ms ease;
}
.sell-form .btn.btn-primary:hover { transform: translateY(-2px); filter: brightness(0.96); }
.sell-form .btn:not(.btn-primary) {
  background: transparent;
  color: var(--text);
  border: none;
  padding: 10px 14px;
}
.sell-form .btn:hover { transform: translateY(-2px); }
.sell-form .sell-form-actions .btn { padding: 12px 18px; }

/* Remove default focus outline and add subtle focus style */
.sell-form .btn:focus { outline: none; box-shadow: 0 6px 20px rgba(11,115,255,0.10); }

/* Ensure hero and form buttons respect dark theme */
.app-main.dark-theme .hero-sell-btn { background: var(--header-cta-bg-dark, rgba(255,255,255,0.06)); color: var(--header-cta-text-dark, #fff); box-shadow: none; }

/* Dark theme: usar un color alternativo más armónico (no el tono anterior que no te gustó) */
.app-main.dark-theme .sell-hero {
  .btn.btn-primary {
    background: var(--cta-dark, #1ea1ff); /* color alternativo para dark theme */
    color: #fff;
    box-shadow: 0 8px 22px rgba(0,0,0,0.5);
    border: none;
    font-weight: 800;
    padding: 14px 26px; /* asegurar que no se vea recortado */
    font-size: 0.98rem; /* mantener tamaño similar al modo claro */
  }
}

.app-main.dark-theme .sell-form .btn.btn-primary {
  /* publicar debe usar color sólido y legible en dark theme (usar el color de la 1ra imagen) */
  background: var(--cta-light, #0b73ff);
  color: #fff;
  box-shadow: 0 8px 20px rgba(0,0,0,0.45);
  border: none;
}

/* Asegurar con mayor especificidad que el botón Publicar dentro del panel use el color correcto en dark */
.app-main.dark-theme .sell-form-panel .sell-form .btn.btn-primary {
  background: var(--cta-light, #0b73ff) !important;
  color: #fff !important;
  box-shadow: 0 12px 30px rgba(11,115,255,0.18);
  transform: translateZ(0);
}
 

/* Forzar eliminación de outlines/bordes negros heredados y definir foco accesible */
.sell-hero .btn, .sell-form .btn {
  outline: none;
  border: none;
}
.sell-hero .btn:focus, .sell-form .btn:focus {
  outline: none;
  box-shadow: 0 6px 20px rgba(22,99,200,0.22);
}

/* Ajustes para modo oscuro aplicando tokens de `themes.scss` */
.app-main.dark-theme {
  .motos-main {
    /* el fondo de las tarjetas ya usa --card-bg; solo reforzamos las sombras y textos */
    .item-card {
      box-shadow: var(--shadow-sm, 0 6px 18px rgba(0,0,0,0.45));
    }

    .sell-hero {
      /* en modo oscuro el hero será más sutil y armonizará con --card-bg */
      background: linear-gradient(90deg, rgba(138,180,248,0.08), rgba(11,115,255,0.06));
      border: 1px solid var(--muted-border, rgba(255,255,255,0.06));
      box-shadow: none;

      .btn-primary {
        background: var(--card-bg);
        color: var(--primary);
        box-shadow: 0 6px 18px rgba(0,0,0,0.36);
      }
    }

    .card-price {
      background: var(--price-badge-bg);
      color: var(--badge-text);
      box-shadow: none;
    }
    /* Ajustes de color en la previsualización dentro del modal en modo oscuro
       - título en blanco para contraste
       - texto secundario en gris claro (no todo blanco) para mantener jerarquía */
  /* Evitar transparencias en la vista previa dentro del modal para que predomine el gris del tema */
  .preview-card, .preview-body { background: var(--card-bg, #fff); }
    .preview-body h4 { color: #ffffff; }
    .preview-body .preview-meta,
    .preview-body .preview-desc,
    .preview-contact { color: rgba(255,255,255,0.72); }
    .preview-body .preview-meta small { color: rgba(255,255,255,0.65); }

    /* Añadir un borde izquierdo entre el formulario y la previsualización dentro del modal */
    .sell-modal .sell-form-preview { border-left: 1px solid rgba(255,255,255,0.06); padding-left: 18px; }

    /* Evitar que inputs/textarea/select forcen el ancho mínimo del grid (causa
       común de overflow horizontal al hacer zoom). */
    .sell-modal .sell-form-grid input,
    .sell-modal .sell-form-grid select,
    .sell-modal .sell-form-grid textarea {
      min-width: 0;
    }

    /* Asegurar que los controles internos ocupen el 100% del contenedor y no
       fuerzen un ancho mínimo (causa común de overflow en grids) */
    .sell-modal .sell-form-grid input,
    .sell-modal .sell-form-grid select,
    .sell-modal .sell-form-grid textarea {
      width: 100%;
      box-sizing: border-box;
    }

    /* Breakpoint: cuando el modal queda estrecho, apilar la vista previa debajo
       del formulario principal. Esto es aceptable (mencionaste "baja para abajo")
       y evita que el layout se rompa con zoom o en pantallas pequeñas. */
    @media (max-width: 920px) {
      .sell-modal {
        padding: 14px;
        width: min(920px, calc(100% - 32px));
      }
      .sell-modal .sell-form-grid {
        grid-template-columns: 1fr; /* apilar */
      }
      .sell-modal .sell-form-preview {
        grid-column: 1 / -1;
        border-left: none; /* quitar separación vertical */
        padding-left: 0;
        margin-top: 6px;
      }
      /* reducir ligeramente altura de la preview-image para que quepa mejor */
      .sell-modal .preview-image { height: 140px; }
    }
  }
}

/* Hacer que la columna principal del formulario sea scrollable y dejar la
   previsualización sticky para que siempre sea accesible. Esto crea una
   "barrita" de scroll dentro del modal (la que pediste) y evita que los
   controles inferiores queden fuera de vista o provoquen overflow. */
.sell-modal .sell-form-grid {
  align-items: start;
}

.sell-modal .sell-form-main {
  /* Dejar que sea el modal el que haga scroll; así los menus desplegables
     (select) no quedan recortados y no aparece la barra en el medio.
     Mantener un max-height para evitar que el formulario estire demasiado. */
  max-height: calc(100vh - 260px);
  overflow-y: visible;
  overflow-x: hidden; /* prevenir cajas horizontales inesperadas */
  padding-right: 0; /* no necesitamos espacio para scrollbar aquí */
}

/* Asegurar que no aparezca scrollbar horizontal en el grid que contiene
   el formulario y la vista previa */
.sell-modal .sell-form-grid { overflow-x: hidden; }

/* Para navegadores WebKit: ocultar la scrollbar horizontal si existe */
.sell-modal .sell-form-main::-webkit-scrollbar:horizontal { display: none; height: 0; }

.sell-modal .sell-form-preview {
  position: sticky;
  top: 22px; /* coincidir con padding del modal */
  align-self: start;
  /* Añadir separador y evitar que la vista previa sobresalga sobre el
     formulario: padding y recorte de overflow. */
  padding-left: 18px;
  border-left: 1px solid rgba(0,0,0,0.06);
  overflow: hidden;
  /* La preview ocupará hasta cerca del borde derecho del modal; no dejamos
     margen para evitar huecos: la scrollbar del modal aparecerá inmediatamente
     a la derecha de la preview. */
  margin-right: 0;
}

/* Responsive: apilar formulario y preview en pantallas pequeñas y ajustar modal */
@media (max-width: 920px) {
  .sell-modal {
    width: min(920px, calc(100% - 32px));
    padding: 14px;
    max-height: calc(100vh - 48px);
    overflow-y: auto; /* dejar que el modal sea scrollable en pantallas pequeñas */
    box-sizing: border-box;
  }

  .sell-modal .sell-form-grid {
    grid-template-columns: 1fr; /* apilar */
    gap: 12px;
  }

  .sell-modal .sell-form-main { grid-template-columns: 1fr; }

  .sell-modal .sell-form-preview {
    position: static; /* quitar sticky para que fluya en el apilado */
    grid-column: 1 / -1;
    border-left: none;
    padding-left: 0;
    margin-right: 0;
  }

  .sell-modal .sell-form {
    padding-right: 12px; /* evitar que inputs queden bajo scrollbar */
  }

  /* asegurar que inputs y selects respeten el ancho del contenedor */
  .sell-modal .sell-form-grid input,
  .sell-modal .sell-form-grid select,
  .sell-modal .sell-form-grid textarea {
    width: 100%;
    min-width: 0;
  }
}

@media (max-width: 480px) {
  .sell-modal {
    width: calc(100% - 20px);
    padding: 12px;
    border-radius: 10px;
    max-height: calc(100vh - 28px);
  }


  /* reducir el padding-right interno en pantallas medianas para evitar
     recortes o demasiado espacio en el apilado */
  .sell-modal .sell-form { padding-right: 12px; }
  .sell-modal .preview-image { height: 120px; }
  .sell-modal .preview-card { padding: 10px; }

  /* en pantallas pequeñas dejamos el padding pequeño para aprovechar el ancho */
  .sell-modal .sell-form { padding-right: 8px; }
}

/* Extra responsive refinements para móviles pequeños */
@media (max-width: 420px) {
  /* Forzar que la preview ocupe todo el ancho cuando el modal es estrecho */
  .sell-modal .sell-form-preview {
    max-width: none;
    width: 100%;
    padding-left: 0;
    padding-right: 0;
    border-left: none;
    position: static; /* permitir flujo natural en apilado */
    margin-top: 6px;
  }

  /* Hacer la tarjeta de preview más compacta y en fila para aprovechar el ancho */
  .sell-modal .preview-card {
    display: flex;
    gap: 8px;
    align-items: flex-start;
    padding: 8px;
  }

  /* Imagen más pequeña y con proporción fija */
  .sell-modal .preview-image {
    height: 100px;
    flex: 0 0 40%;
    border-radius: 8px;
    overflow: hidden;
  }
  .sell-modal .preview-image img { width: 100%; height: 100%; object-fit: cover; }

  /* Cuerpo de la preview ocupa el resto y reduce tamaños de fuente */
  .sell-modal .preview-body {
    padding: 6px 4px;
    flex: 1 1 60%;
  }
  .sell-modal .preview-body h4 {
    font-size: 0.95rem;
    margin: 0 0 4px 0;
    line-height: 1.12;
    word-break: break-word;
  }
  .sell-modal .preview-desc {
    font-size: 0.82rem;
    margin: 4px 0;
    color: var(--muted);
    max-height: 3.6rem; /* limitar alto para que no ocupe demasiado */
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Badge de precio más pequeño y menos intrusivo */
  .sell-modal .preview-price {
    left: 8px;
    top: 8px;
    padding: 4px 8px;
    font-size: 0.75rem;
    border-radius: 6px;
  }

  /* Meta y contacto: forzar wrapping y tamaño reducido */
  .sell-modal .preview-meta, .sell-modal .preview-meta.small {
    font-size: 0.78rem;
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    align-items: center;
    color: var(--muted);
  }
  .sell-modal .preview-contact {
    font-size: 0.82rem;
    margin-top: 6px;
    white-space: normal;
    word-break: break-word;
    color: var(--muted);
  }
}

@media (max-width: 360px) {
  .sell-modal .preview-image { height: 88px; }
  .sell-modal .preview-body h4 { font-size: 0.9rem; }
  .sell-modal .preview-desc { font-size: 0.78rem; }
  .sell-modal .preview-price { font-size: 0.7rem; padding: 3px 6px; }
}
